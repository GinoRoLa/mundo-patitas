/* ================== Reset & Variables ================== */
* { box-sizing: border-box; }

:root{
  /* Paleta principal*/
  --bg: #f0f4f9;
  --card: #ffffff;
  --text: #111827;
  --muted: #1e293b;

  /* Bordes / sombras */
  --border: #e2e8f0;
  --shadow: 0 10px 30px rgba(15, 23, 42, .08);

  /* Primarios */
  --primary: #93c5fd;
  --primary-600:#3b82f6;
  --primary-50:#eff6ff;

  /* Estados */
  --success:#16a34a;
  --danger:#dc2626;

  /* Textos secundarios */
  --text-strong: #1e293b;

  /* Placeholders */
  --placeholder:#94a3b8;

  /* Superficies claras */
  --surface-muted:#f8fafc;

  /* Focus / Hovers */
  --focus-ring: rgba(147, 197, 253, .45); 
  --hover-shadow: rgba(59, 130, 246, .15);

  /* Chips, tablas y resaltados*/
  --soft-rose:#bfdbfe;
  --table-row-hover:#eff6ff;

  /* Paneles */
  --panel-bg:#dbeafe; 

  /* Mensajes */
  --msg-bg:#f1f5f9; 
  --msg-text:#334155;
  --ok-bg:#ecfdf5;
  --ok-text:#065f46;
  --ok-border:#a7f3d0;
  --error-bg:#fff2f2;  
  --error-text:#7f1d1d; 
  --error-border:#fbcaca;

  /* Head de tabla */
  --thead-bg: var(--soft-rose);
  --thead-text: var(--text-strong);

  /* Grises */
  --gray-strong:#475569;
  --gray-soft:#e2e8f0;

  /* Radios / tipografías */
  --radius-lg: 16px;
  --radius-md: 12px;
  --radius-sm: 10px;

  --fs-h2: 22px;
  --fs-h3: 13px;
  --fs-label: 12px;
  --fs-body: 14px;

  /* Límites de campos para centrar */
  --field-min: 260px;
  --field-max: 400px;
  --field-gap: 18px;
}

html, body{
  height: 100%;
  background: var(--bg);
  color: var(--text);
  font: var(--fs-body)/1.55 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  margin: 0;
  padding: 0;
}

/* ================== Layout ================== */
.container{
  max-width: 1400px;
  margin: 26px auto;
  padding: 0 16px;
}

section{
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow);
  padding: 22px;
}

h2{
  margin: 0 0 14px;
  font-size: var(--fs-h2);
  font-weight: 800;
  letter-spacing: .2px;
}

h3{
  margin: 18px 0 12px;
  font-size: var(--fs-h3);
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: .9px;
}

h4{
  margin: 0 0 8px;
  font-size: 13px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: .6px;
  font-weight: 700;
}

label{
  color: var(--muted);
  font-size: var(--fs-label);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: .5px;
}

hr{
  border: none;
  border-top: 1px solid var(--border);
  margin: 20px 0;
}

.row{ display:flex; flex-wrap:wrap; gap:12px; align-items:center; }
.row--between{ justify-content: space-between; }

.grid{ display:grid; gap: 10px 14px; align-items:start; }
.grid-2{ grid-template-columns: 1fr 1fr; }
.grid-3{ grid-template-columns: 1fr 1fr 1fr; }

@media (max-width: 920px){
  .grid-2,.grid-3{ grid-template-columns: 1fr; }
}

/* ================== META (rol/actor/fecha/hora) ================== */
section.has-meta{ position: relative; padding-top: 72px; }

.row--meta{
  position: absolute; top: 16px; right: 16px;
  display: flex; flex-direction: column;
  gap: 6px; align-items: flex-end;
}

.meta-line{ display:flex; gap:8px; align-items:center; }
.row--meta .col{ display:flex; gap:6px; align-items:center; }

.badge{
  display:inline-block;
  padding: 4px 10px;
  border: 1px solid var(--border);
  border-radius: 999px;
  background: var(--surface-muted);
  color: var(--gray-strong);
  font-size: 12px; 
  font-weight: 600;
}

.row--meta input[type="date"],
.row--meta input[type="text"],
.row--meta #txtHora{
  height: 28px; 
  padding: 2px 8px;
  border-radius: 999px;
  background: var(--surface-muted);
  color: var(--gray-strong);
  border: 1px solid var(--border);
  font-size: 12px;
}

.row--meta label{ 
  font-size: 11px; 
  color: var(--gray-strong); 
  text-transform: none; 
}

@media (max-width: 720px){
  .row--meta{ 
    position: static; 
    align-items: flex-start; 
    margin-bottom: 8px; 
  }
  .meta-line{ 
    flex-wrap: wrap; 
    justify-content: flex-start; 
  }
}

/* ================== Inputs ================== */
input, select, button{ font: inherit; }

input[type="text"],
input[type="number"],
input[type="date"],
input[type="email"],
select{
  width: 100%;
  height: 42px;
  padding: 10px 12px;
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  background: var(--card);
  color: var(--text);
  transition: border-color .2s, box-shadow .2s, background .2s;
}

input:focus, select:focus{
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px var(--focus-ring);
}

input::placeholder{ color: var(--placeholder); }

input[readonly]{
  background: var(--surface-muted);
  color: var(--text-strong);
  border-color: var(--border);
}

input[disabled], select[disabled]{
  background: var(--surface-muted);
  color: var(--placeholder);
  cursor: not-allowed;
}

.input-group{ display:flex; width:100%; align-items:stretch; }
.input-group > input{
  border-top-right-radius: 0;
  border-bottom-right-radius: 0;
}
.input-group > button{
  border-top-left-radius: 0;
  border-bottom-left-radius: 0;
  min-width: 110px;
}

/* Validaciones visuales */
.input--invalid{ border-color: var(--danger)!important; }
.input--invalid:focus{ box-shadow: 0 0 0 3px rgba(220,38,38,.15); }
.input--ok{ border-color: var(--success)!important; }
.input--ok:focus{ box-shadow: 0 0 0 3px rgba(22,163,74,.15); }

/* ================== Inputs estilo "chip suave" ================== */
:root{
  --radius-semi: 6px;
  --input-soft-bg: var(--primary-50);
  --input-soft-border: var(--border);
}

.input--soft{
  height: 40px;
  background: var(--input-soft-bg);
  border: 1px solid var(--input-soft-border);
  border-radius: var(--radius-semi);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.6);
  transition: background .2s, border-color .2s, box-shadow .2s;
}

.input--soft::placeholder{ color: color-mix(in srgb, var(--placeholder), #000 12%); }

.input--soft:focus{
  background: #fff;
  border-color: var(--primary-600);
  box-shadow: 0 0 0 3px var(--focus-ring);
  outline: none;
}

.input--soft[readonly]{
  background: var(--surface-muted);
  color: var(--text-strong);
}

.input--soft[disabled]{
  background: var(--surface-muted);
  color: var(--placeholder);
  cursor: not-allowed;
}

.input--compact{ height: 36px; padding: 8px 10px; }

.input--soft.input--invalid{ border-color: var(--danger) !important; }
.input--soft.input--invalid:focus{ box-shadow: 0 0 0 3px rgba(220,38,38,.16); }
.input--soft.input--ok{ border-color: var(--success) !important; }
.input--soft.input--ok:focus{ box-shadow: 0 0 0 3px rgba(22,163,74,.16); }

/* ================== Botones ================== */
button{
  appearance:none;
  border: 1px solid var(--primary);
  background: var(--primary);
  color: var(--text);
  padding: 10px 16px;
  height: 42px;
  border-radius: var(--radius-sm);
  font-weight: 700;
  cursor:pointer;
  transition: transform .05s ease, background .2s, border-color .2s, box-shadow .2s;
}

button:hover:not(:disabled){
  background: var(--primary-600);
  border-color: var(--primary-600);
  box-shadow: 0 6px 16px var(--hover-shadow);
}

button:active{ transform: translateY(1px); }

button:disabled, button[disabled]{ 
  opacity:.5; 
  cursor:not-allowed; 
  box-shadow:none; 
}

.btn{ 
  border:1px solid var(--border); 
  background:#fff; 
  border-radius:10px; 
  padding:.55rem .9rem; 
}

.btn-primary{ 
  background:var(--primary); 
  border-color:var(--primary-600); 
  color:#111827; 
  font-weight:600; 
}

.btn-ghost{ 
  background:#fff; 
  color:var(--text-strong); 
  border-color:var(--border); 
}

.btn-ghost:hover:not(:disabled){ 
  background: var(--surface-muted); 
}

/* ================== Tablas ================== */
.table-scroll{
  max-height: 320px;
  overflow: auto;
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  margin-top: 10px;
}

.table{
  width:100%;
  border-collapse: separate;
  border-spacing: 0;
  background: var(--card);
}

.table thead th{
  background: var(--thead-bg);
  color: var(--thead-text);
  text-align:left;
  font-size: 12px;
  padding: 11px 12px;
  border-bottom:1px solid var(--border);
  text-transform: uppercase;
  letter-spacing: .6px;
  position: sticky;
  top: 0;
  z-index: 1;
}

.table tbody td{
  padding: 11px 12px;
  border-bottom:1px solid var(--border);
  vertical-align: middle;
  font-size: 13px;
}

.table tbody tr:last-child td{ border-bottom:none; }
.table tbody tr:hover{ background: var(--table-row-hover); }

.table button{ height: 32px; padding: 6px 10px; }

.table input[type="checkbox"]{
  width: 16px;
  height: 16px;
  cursor: pointer;
}

/* ================== Mensajes ================== */
.msg{
  min-height: 1.25em;
  margin-top:14px;
  padding: 10px 12px;
  border-radius: var(--radius-sm);
  border:1px solid var(--border);
  background: var(--msg-bg);
  color: var(--msg-text);
  font-size: 13px;
}

.msg.ok{
  background: var(--ok-bg);
  color: var(--ok-text);
  border-color: var(--ok-border);
}

.msg.error{
  background: var(--error-bg);
  color: var(--error-text);
  border-color: var(--error-border);
}

.hint{
  display:block;
  margin-top:8px;
  font-size:12px;
  color: var(--placeholder);
  line-height: 1.4;
}

.custom-toast {
  position: fixed;
  top: 16px;
  right: 16px;
  background: #323232;
  color: #fff;
  padding: 10px 18px;
  border-radius: 8px;
  opacity: 0;
  transform: translateY(-12px);
  transition: opacity .25s ease, transform .25s ease;
  z-index: 99999;
  font-size: 14px;
  box-shadow: 0 6px 24px rgba(0,0,0,.18), 0 2px 6px rgba(0,0,0,.12);
  pointer-events: none;
}

.custom-toast.show {
  opacity: 1;
  transform: translateY(0);
}

.custom-toast.info    { background: #2196f3; }
.custom-toast.success { background: #4caf50; }
.custom-toast.warning { background: #ff9800; }
.custom-toast.error   { background: #f44336; }

/* ================== Grupos/Cards ================== */
.groups-summary{
  margin: 8px 0 12px;
  padding: 10px 12px;
  border-radius: 8px;
  background: #f6f8fb;
  color: #2b3a4a;
  font-size: 14px;
  border: 1px solid #e6ecf3;
}

.groups-list{
  display: grid;
  gap: 12px;
  margin-top: 10px;
}

.group-card{
  border: 1px solid var(--border);
  border-radius: var(--radius-md);
  background: #fff;
  box-shadow: 0 2px 8px rgba(0,0,0,.04);
  padding: 14px;
}

.group-card h4{
  margin: 0 0 8px;
  font-size: 13px;
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: .6px;
  font-weight: 700;
}

.group-card .info-line{
  display: flex;
  justify-content: space-between;
  padding: 6px 0;
  font-size: 13px;
  border-bottom: 1px solid var(--border);
}

.group-card .info-line:last-child{
  border-bottom: none;
}

.group-card .label{
  color: var(--muted);
  font-weight: 600;
  text-transform: none;
  letter-spacing: 0;
  font-size: 13px;
}

.group-card .value{
  color: var(--text);
  font-weight: 400;
}

/* ================== Banner de correo ================== */
.mail-banner{
  margin: 16px 0;
  padding: 12px 14px;
  border-radius: 10px;
  background: #eef6ff;
  color: #1e3a8a;
  border: 1px solid #cfe3ff;
  font-size: 14px;
}

.mail-banner label{
  display: flex;
  align-items: center;
  gap: 8px;
  text-transform: none;
  letter-spacing: 0;
  color: #1e3a8a;
  font-weight: 600;
  cursor: pointer;
  font-size: 14px;
}

.mail-banner input[type="checkbox"]{
  width: 18px;
  height: 18px;
  cursor: pointer;
}

.mail-banner-info{
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 600;
}

.mail-banner-info::before{
  content: "✉️";
  font-size: 18px;
}

/* ================== Acciones ================== */
.acciones{ 
  display:flex; 
  gap:12px; 
  justify-content:flex-end; 
  margin-top: 16px; 
}

/* ================== Modal ================== */
.modal { 
  border:0; 
  padding:0; 
  background:transparent; 
  max-width:56rem; 
  width:92%; 
}

.modal::backdrop { 
  background: rgba(15,23,42,.45); 
  backdrop-filter: blur(2px); 
}

.modal__card { 
  background:#fff; 
  border-radius:14px; 
  padding:1.5rem; 
  box-shadow: var(--shadow); 
}

.modal__title { 
  margin:0 0 1rem 0; 
  font-size:1.25rem; 
  font-weight:700; 
  color: var(--text-strong); 
}

.modal__msg { 
  margin:0 0 1rem 0; 
  color:#334155; 
  line-height:1.45; 
  font-size: 14px;
}

.modal__actions { 
  display:flex; 
  justify-content:flex-end; 
  gap:.75rem; 
  margin-top: 1.5rem;
}

/* ================== Status Badges ================== */
.status-badge{
  display: inline-block;
  padding: 4px 10px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 700;
  line-height: 1;
  border: 1px solid transparent;
}

.status-badge.ready, .status-badge.ok { 
  background:#e7f7ef; 
  color:#166534; 
  border-color:#b7e4c9; 
}

.status-badge.detected, .status-badge.warn { 
  background:#fff7ed; 
  color:#9a3412; 
  border-color:#fde68a; 
}

.status-badge.none, .status-badge.error { 
  background:#f1f5f9; 
  color:#64748b; 
  border-color:#e2e8f0; 
}

/* ================== Mono font for codes ================== */
.mono{
  font-family: 'Courier New', monospace;
  font-size: 12px;
}

/* ================== Campos centrados y acotados ================== */
.compact-fields input[type="text"],
.compact-fields input[type="number"],
.compact-fields input[type="date"],
.compact-fields input[type="email"],
.compact-fields select {
  max-width: var(--field-max);
}

.compact-fields .grid,
.compact-fields .row { justify-content: center; }

.compact-fields .grid-2{
  grid-template-columns: repeat(2, minmax(var(--field-min), var(--field-max)));
  justify-content: center;
  column-gap: var(--field-gap);
  row-gap: 12px;
}

.compact-fields .grid-3{
  grid-template-columns: repeat(3, minmax(var(--field-min), var(--field-max)));
  justify-content: center;
  column-gap: var(--field-gap);
  row-gap: 12px;
}

@media (max-width: 920px){
  .compact-fields .grid-2,
  .compact-fields .grid-3{
    grid-template-columns: minmax(var(--field-min), var(--field-max));
  }
}

/* ================== Fieldsets ================== */
fieldset{
  border:1px dashed var(--gray-soft);
  background: var(--surface-muted);
  border-radius: var(--radius-md);
  padding: 14px;
}

legend{
  padding: 0 6px;
  font-size: var(--fs-label);
  color: var(--muted);
  text-transform: uppercase;
  letter-spacing: .6px;
}

/* ================== Responsive ================== */
@media (max-width: 1200px){
  .grid{ 
    grid-template-columns: 1fr !important; 
  }
}

@media (max-width: 720px){
  section.has-meta{ padding-top: 60px; }
  h2{ font-size: 18px; }
}

/* ===== Layout en una sola columna ===== */
.layout-col {
  display: flex;
  flex-direction: column;
  gap: 24px;            /* espacio entre secciones */
}

.layout-col > section {
  width: 100%;
}

/* Botón detalle en tabla evaluación */
.btn-detalle {
  padding: 4px 12px;
  font-size: 0.875rem;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s;
}

.btn-detalle:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.btn-sm {
  font-size: 0.8125rem;
  padding: 3px 10px;
}

/* Badges de estado mejorados */
.status-badge {
  padding: 3px 10px;
  border-radius: 12px;
  font-size: 0.75rem;
  font-weight: 500;
  display: inline-block;
}

.status-badge.ready {
  background: #d1fae5;
  color: #065f46;
}

.status-badge.detected {
  background: #fef3c7;
  color: #92400e;
}

.status-badge.none {
  background: #f3f4f6;
  color: #6b7280;
}

/* Semáforos de cotizaciones */
.col-cots {
  font-weight: 600;
  font-family: 'Segoe UI', system-ui, sans-serif;
}

.col-cots::before {
  display: inline-block;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  margin-right: 6px;
}

/* No usar pseudoelemento, el emoji ya hace el trabajo */

#dlgProcessing::backdrop { background: rgba(0,0,0,.4); }
#dlgProcessing { border:0; padding:18px 20px; border-radius:12px; }
.proc { display:flex; align-items:center; gap:14px; min-width:260px; }
.proc h3 { margin:0 0 4px; font-size:16px; }
.proc p  { margin:0; color:#6b7280; font-size:13px; }
.spin {
  width:28px; height:28px; border-radius:50%;
  border:3px solid #e5e7eb; border-top-color:#2563eb;
  animation: spin .8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* Botón deshabilitado */
button[disabled] { opacity:.6; cursor:not-allowed; }
